{{ define "head" }}
{{ if .Site.Params.bgImg -}}
<style>
	.bg-img {
		background-image: url('{{.Site.Params.bgImg}}');
	}

</style>
{{- else if .Site.Params.images -}}
{{- range first 1 .Site.Params.images -}}
<style>
	.bg-img {
		background-image: url('{{. | absURL}}');
	}

</style>
{{- end -}}
{{- end -}}
{{ end }}

{{ define "main" }}
{{- if (or .Site.Params.images .Site.Params.bgImg) }}
<div class="bg-img"></div>
{{- end }}
<div id="spotlight" class="animated fadeIn">
	<div id="home-center">
		{{- with .Site.Params.homePrefix }}

		<div id="home-prefix">{{.}} <span class="wave">ðŸ‘‹</span>
		</div>
		{{- end }}
		<div id="home-title"> </div>
		<div id="home-subtitle"> </div>
		{{- with .Site.Params.social }}
		<div id="home-social">
			{{ partialCached "social-icons.html" . }}
		</div>
		{{- end }}
		<nav id="home-nav" class="site-nav">
			{{- range .Site.Menus.main }}
			<a href="{{ .URL | absLangURL }}">{{ .Name }}</a>
			{{- end }}
		</nav>
	</div>
	<div id="home-footer">
		<p>
			&copy; {{ now.Format "2006" }} <a href="{{ .Site.BaseURL }}">{{ .Site.Author.name }}</a>{{
			.Site.Params.footerCopyright | safeHTML }}
			{{- with (not (in (.Site.Language.Get "disableKinds") "RSS")) }} &#183; <a href="{{ " posts/index.xml" | absURL
				}}" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
					viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
					stroke-linejoin="round" class="feather feather-rss">
					<path d="M4 11a9 9 0 0 1 9 9"></path>
					<path d="M4 4a16 16 0 0 1 16 16"></path>
					<circle cx="5" cy="19" r="1"></circle>
				</svg></a>{{ end }}
		</p>
	</div>
</div>

<script>
	function sleep(ms) {
		return new Promise(resolve => setTimeout(resolve, ms));
	}

	async function typeWriter(el, txt) {
		document.getElementById(el).innerHTML = "";

		for (let i = 0; i < txt.length; i++) {
			document.getElementById(el).innerHTML += txt.charAt(i);
			await sleep(50);
		}
	}

	function startTyping() {
		let subtitleTexts = [
			"I do 'computer stuff'",
			"I shoot troubled computers",
			"The imposter syndrome is kicking in right about now",
			"I don't know JavaScript",
			"Don't trust strangers on the internet",
			`You are lucky visitor #${Math.floor(Math.random() * 100000)}`,
			"Have you tried turning it off and on again?",
			"The printer just ran out of ink",
			"Have a nice day!",
			"a blog on the internet",
			"Opinions are not mine"
		]

		let idx = Math.floor(Math.random() * subtitleTexts.length)
		let subText = subtitleTexts[idx]


		setTimeout(typeWriter, 100, "home-prefix", document.getElementById("home-prefix").innerText);
		setTimeout(typeWriter, 1000, "home-title", "Welcome to my blog.");
		setTimeout(typeWriter, 2000, "home-subtitle", subText);
		document.querySelector(".wave").focus();
	}
	startTyping();
</script>

{{ end }}
